@model SmartRx.Domain.Drug

<h2>Create Drug</h2>
<form method="post" id="drugForm">
    <div class="mb-3">
        <label class="form-label">Brand Name</label>
        <input asp-for="BrandName" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">Manufacturer</label>
        <input asp-for="Manufacturer" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">Ingredients (comma-separated)</label>
        <input name="ingredientsCsv" class="form-control" required />
    </div>
    <div class="mb-3">
        <label class="form-label">Dosage</label>
        <input asp-for="DosageInstruction" class="form-control" required />
    </div>
    <div class="row">
        <div class="col">
            <label class="form-label">Manufactured</label>
            <input asp-for="ManufacturedDate" type="date" class="form-control" required />
        </div>
        <div class="col">
            <label class="form-label">Expiry</label>
            <input asp-for="ExpiryDate" type="date" class="form-control" required />
        </div>
    </div>
    <div class="mb-3 mt-3">
        <label class="form-label">Price</label>
        <input asp-for="Price" type="number" step="0.01" class="form-control" required />
    </div>
    <button type="submit" id="saveBtn" class="btn btn-primary" disabled>Save</button>

    @if (ViewBag.Error != null)
    {
        <div class="text-danger mt-2">@ViewBag.Error</div>
    }
</form>

@section Scripts {
    <script>
        const form = document.getElementById('drugForm');
        const saveBtn = document.getElementById('saveBtn');

        form.addEventListener('input', () => {
            saveBtn.disabled = !form.checkValidity();
        });
    </script>
}
